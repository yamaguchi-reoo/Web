<!DOCTYPE html>

<html lang="ja" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Sample3_04</title>
    <style type="text/css">
        img {
            width: 200px;
            height: auto;
        }
    </style>
</head>
<body>
    <h2>30H_JSのこよみ先生</h2>
    <p id="message">JavaScriptは面白いですか？</p>
    <input type="button" value="とっても！" onclick="disp()" />
    <input type="button" value="ちょっとむずかしい・・・" onclick="dispYell()" /><br />
    <img id="teacherImg" src="images/yellow6.jpg" alt="こよみ先生" />

    <script>
        let isDisp = false;     //表示しているかどうか
        let repeat;
        let disp = function () {//タイマー表示ID
            if (repeat) {
                clearTimeout(repeat);
            }

            let pMessage = document.getElementById('message');

            if (isDisp == true) {
                pMessage.innerHTML = "それはよかったです！";
                isDisp = false;
            }
            else{
                pMessage.innerHTML = "<br>";
                isDisp = true;
            }

            repeat = setTimeout("disp()", 500);
        }

        let yellMessage = '私ももっとがんばります～';   //表示する文字列
        let yellIndex = 1;                              //表示する文字列範囲
        let dispYell = function () {
            if (repeat) {
                clearTimeout(repeat);
            }
            let pMessage = document.getElementById('message');
            pMessage.innerHTML = yellMessage.substring(0, yellIndex)
            yellIndex++;
            if (yellIndex > yellMessage.length) {
                yellIndex = 1;
            }
            repeat = setTimeout('dispYell()', 500);
        }


        //let stopDisp = function () {
        //    if (repeat) {
        //        clearTimeout(repeat);
        //    }
        //}
    </script>
</body>
</html>